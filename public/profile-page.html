<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <script src="js/jquery-1.8.2.min.js"></script>
    <script type="text/javascript">


        function doShowPrev(ref) {
            var image = document.getElementById('prev');
            image.src = URL.createObjectURL(ref.files[0]);
        }

        $(document).ready(function(){
            $("#btnSearch").click(function () {
                var url = "/fetchRecord?uid=" + $("#txtuid").val();
                $.get(url, function (responseJson) //its JSON Array
                {
                    if (responseJson.length == 0)
                        alert("Invalid id");
                    else {
                        alert(JSON.stringify(responseJson));
                        // $("#txtPwd").val(responseJson[0].pwd);
                        // $("#txtMob").val(responseJson[0].mobile);
                        // $("#prev").attr("src", "uploads/" + responseJson[0].picpath);
                        // $("#hdn").val(responseJson[0].picpath);
                           $("#txtadd").val(responseJson[0].address);
                           $("#txtcity").val(responseJson[0].city);
                           $("#combostate").val(responseJson[0].state);
                           $("#txtzip").val(responseJson[0].zip);
                           $("#comboid").val(responseJson[0].idtype);
                           $("#txtnumber").val(responseJson[0].idnumber);
                           $("#txtmobno").val(responseJson[0].mobnumber);
                           $("#ppic").val(responseJson[0].picpath);
                           $("#prev").attr("src", "uploads/" + responseJson[0].picpath);
                           $("#hdn").val(responseJson[0].picpath);
                    }
                })
            });
        })

    </script>
    <title>Document</title>
</head>

<body style="background-color: rgb(167, 139, 129);">
    <div class="box-profile">
        <form method="post" enctype="multipart/form-data" class="row g-3">
            <div class="col-md-6">
                <label for="validationDefaultUsername" class="form-label">Username</label>
                <p>
                    <input type="text" name="txxtuid" id="txtuid" class="form-control">
                </p>
                    <p>
                <input type="button" name="btnSearch" id="btnSearch" class="btn btn-outline-primary" value="Search">
            </p>
            </div>
            <div class="col-md-12">
                <label for="validationDefault01" class="form-label">Address</label>
                <input type="text" class="form-control" name="txtadd" id="txtadd" required>
            </div>
            <div class="col-md-6">
                <label for="validationDefault03" class="form-label">City</label>
                <input type="text" class="form-control" name="txtcity" id="txtcity" required>
            </div>
            <div class="col-md-3">
                <label for="validationDefault04" class="form-label">State</label>
                <select class="form-select" name="combostate" id="combostate" required>
                    <option selected disabled value="">Choose...</option>
                    <option value="Andhra Pradesh">Andhra Pradesh</option>
                    <option value="Andaman and Nicobar Islands">Andaman and Nicobar Islands</option>
                    <option value="Arunachal Pradesh">Arunachal Pradesh</option>
                    <option value="Assam">Assam</option>
                    <option value="Bihar">Bihar</option>
                    <option value="Chandigarh">Chandigarh</option>
                    <option value="Chhattisgarh">Chhattisgarh</option>
                    <option value="Dadar and Nagar Haveli">Dadar and Nagar Haveli</option>
                    <option value="Daman and Diu">Daman and Diu</option>
                    <option value="Delhi">Delhi</option>
                    <option value="Lakshadweep">Lakshadweep</option>
                    <option value="Puducherry">Puducherry</option>
                    <option value="Goa">Goa</option>
                    <option value="Gujarat">Gujarat</option>
                    <option value="Haryana">Haryana</option>
                    <option value="Himachal Pradesh">Himachal Pradesh</option>
                    <option value="Jammu and Kashmir">Jammu and Kashmir</option>
                    <option value="Jharkhand">Jharkhand</option>
                    <option value="Karnataka">Karnataka</option>
                    <option value="Kerala">Kerala</option>
                    <option value="Madhya Pradesh">Madhya Pradesh</option>
                    <option value="Maharashtra">Maharashtra</option>
                    <option value="Manipur">Manipur</option>
                    <option value="Meghalaya">Meghalaya</option>
                    <option value="Mizoram">Mizoram</option>
                    <option value="Nagaland">Nagaland</option>
                    <option value="Odisha">Odisha</option>
                    <option value="Punjab">Punjab</option>
                    <option value="Rajasthan">Rajasthan</option>
                    <option value="Sikkim">Sikkim</option>
                    <option value="Tamil Nadu">Tamil Nadu</option>
                    <option value="Telangana">Telangana</option>
                    <option value="Tripura">Tripura</option>
                    <option value="Uttar Pradesh">Uttar Pradesh</option>
                    <option value="Uttarakhand">Uttarakhand</option>
                    <option value="West Bengal">West Bengal</option>
                </select>
            </div>
            <div class="col-md-3 mb-4">
                <label for="validationDefault05" class="form-label">Zip</label>
                <input type="text" class="form-control" name="txtzip" id="txtzip" required>
            </div>
            <div class="col-md-6">
                <label for="inputNumber" class="form-label">ID Proof</label>
                <select id="comboid" name="comboid" class="form-select">
                    <option disabled selected>Choose...</option>
                    <option value="Aadhar Card">Aadhar Card</option>
                    <option value="Driving License">Driving License</option>
                </select>
            </div>
            <div class="col-md-6 mb-3">
                <label for="inputCity" class="form-label">Number</label>
                <input type="text" class="form-control" name="txtnumber" id="txtnumber">
            </div>
            <div class="col-md-6">
                <label for="inputCity" class="form-label">Contact Number</label>
                <input type="text" class="form-control" name="txtmobno" id="txtmobno">
            </div>
            <div class="col-md-6">
                <input type="file" name="ppic" id="ppic" onchange="doShowPrev(this);" required> <br>
                <input type="hidden" id="hdn" name="hdn">
                <img src="pics/kisspng-user-logo-information-service-design-5ba34f88e63387.4679724515374293849429.png   "
                    width="100" height="100" id="prev">
            </div>
            <div class="col-12">
                <input type="submit" name="submit" value="Submit" class="btn btn-primary" formaction="/profile-submit">
                <button class="btn btn-primary" type="submit">Update</button>
            </div>
        </form>
    </div>
</body>

</html>